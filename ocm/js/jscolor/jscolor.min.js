var jscolor={dir:"",bindClass:"color",binding:!0,preloading:!0,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){jscolor.binding&&jscolor.bind(),jscolor.preloading&&jscolor.preload()},getDir:function(){var e;return jscolor.dir||(e=jscolor.detectDir(),jscolor.dir=!1!==e?e:"jscolor/"),jscolor.dir},detectDir:function(){for(var e=location.href,o=document.getElementsByTagName("base"),t=0;t<o.length;t+=1)o[t].href&&(e=o[t].href);for(o=document.getElementsByTagName("script"),t=0;t<o.length;t+=1)if(o[t].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(o[t].src)){var r=new jscolor.URI(o[t].src).toAbsolute(e);return r.path=r.path.replace(/[^\/]+$/,""),r.query=null,r.fragment=null,r.toString()}return!1},bind:function(){for(var matchClass=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i"),e=document.getElementsByTagName("input"),i=0,m;i<e.length;i+=1){if(!e[i].color&&e[i].className&&(m=e[i].className.match(matchClass))){var prop={};if(m[3])try{eval("prop="+m[3])}catch(eInvalidProp){}e[i].color=new jscolor.color(e[i],prop)}}},preload:function(){for(var e in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(e)&&jscolor.loadImage(e)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(e){jscolor.imgRequire[e]=!0},loadImage:function(e){jscolor.imgLoaded[e]||(jscolor.imgLoaded[e]=new Image,jscolor.imgLoaded[e].src=jscolor.getDir()+e)},fetchElement:function(e){return"string"==typeof e?document.getElementById(e):e},addEvent:function(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent&&e.attachEvent("on"+o,t)},fireEvent:function(e,o){var t;e&&(document.createEventObject?(t=document.createEventObject(),e.fireEvent("on"+o,t)):document.createEvent?((t=document.createEvent("HTMLEvents")).initEvent(o,!0,!0),e.dispatchEvent(t)):e["on"+o]&&e["on"+o]())},getElementPos:function(e){var o=e,t=e,r=0,s=0;if(o.offsetParent)for(;r+=o.offsetLeft,s+=o.offsetTop,o=o.offsetParent;);for(;(t=t.parentNode)&&"BODY"!==t.nodeName;)r-=t.scrollLeft,s-=t.scrollTop;return[r,s]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getMousePos:function(e){return"number"==typeof(e=e||window.event).pageX?[e.pageX,e.pageY]:"number"==typeof e.clientX?[e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.clientY+document.body.scrollTop+document.documentElement.scrollTop]:void 0},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(e){function r(e){for(var o,t="";e;)"../"===e.substr(0,3)||"./"===e.substr(0,2)?e=e.replace(/^\.+/,"").substr(1):"/./"===e.substr(0,3)||"/."===e?e="/"+e.substr(3):"/../"===e.substr(0,4)||"/.."===e?(e="/"+e.substr(4),t=t.replace(/\/?[^\/]*$/,"")):"."===e||".."===e?e="":(o=e.match(/^\/?[^\/]*/)[0],e=e.substr(o.length),t+=o);return t}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(e){e=e.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=e[3]?e[2]:null,this.authority=e[5]?e[6]:null,this.path=e[7],this.query=e[9]?e[10]:null,this.fragment=e[12]?e[13]:null,this},this.toString=function(){var e="";return null!==this.scheme&&(e=e+this.scheme+":"),null!==this.authority&&(e=e+"//"+this.authority),null!==this.path&&(e+=this.path),null!==this.query&&(e=e+"?"+this.query),null!==this.fragment&&(e=e+"#"+this.fragment),e},this.toAbsolute=function(e){var e=new jscolor.URI(e),o=this,t=new jscolor.URI;return null!==e.scheme&&(null!==o.scheme&&o.scheme.toLowerCase()===e.scheme.toLowerCase()&&(o.scheme=null),null!==o.scheme?(t.scheme=o.scheme,t.authority=o.authority,t.path=r(o.path),t.query=o.query):(null!==o.authority?(t.authority=o.authority,t.path=r(o.path),t.query=o.query):(""===o.path?(t.path=e.path,null!==o.query?t.query=o.query:t.query=e.query):("/"===o.path.substr(0,1)?t.path=r(o.path):(null!==e.authority&&""===e.path?t.path="/"+o.path:t.path=e.path.replace(/[^\/]+$/,"")+o.path,t.path=r(t.path)),t.query=o.query),t.authority=e.authority),t.scheme=e.scheme),t.fragment=o.fragment,t)},e&&this.parse(e)},color:function(a,e){for(var o in this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.valueElement=a,this.styleElement=a,this.hsv=[0,0,1],this.rgb=[1,1,1],this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4,e)e.hasOwnProperty(o)&&(this[o]=e[o]);function h(e,o,t){if(null===e)return[t,t,t];var r=Math.floor(e),s=t*(1-o),i=t*(1-o*(r%2?e-r:1-(e-r)));switch(r){case 6:case 0:return[t,i,s];case 1:return[i,t,s];case 2:return[s,t,i];case 3:return[s,i,t];case 4:return[i,s,t];case 5:return[t,s,i]}}function d(){switch(y){case 0:var e=1;break;case 1:e=2}var o=Math.round(b.hsv[0]/6*(jscolor.images.pad[0]-1)),t=Math.round((1-b.hsv[e])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=b.pickerFace+b.pickerInset+o-Math.floor(jscolor.images.cross[0]/2)+"px "+(b.pickerFace+b.pickerInset+t-Math.floor(jscolor.images.cross[1]/2))+"px";var r=jscolor.picker.sld.childNodes;switch(y){case 0:for(var s=h(b.hsv[0],b.hsv[1],1),i=0;i<r.length;i+=1)r[i].style.backgroundColor="rgb("+s[0]*(1-i/r.length)*100+"%,"+s[1]*(1-i/r.length)*100+"%,"+s[2]*(1-i/r.length)*100+"%)";break;case 1:var c,l=[b.hsv[2],0,0],n=(i=Math.floor(b.hsv[0]))%2?b.hsv[0]-i:1-(b.hsv[0]-i);switch(i){case 6:case 0:s=[0,1,2];break;case 1:s=[1,0,2];break;case 2:s=[2,0,1];break;case 3:s=[2,1,0];break;case 4:s=[1,2,0];break;case 5:s=[0,2,1]}for(i=0;i<r.length;i+=1)c=1-1/(r.length-1)*i,l[1]=l[0]*(1-c*n),l[2]=l[0]*(1-c),r[i].style.backgroundColor="rgb("+100*l[s[0]]+"%,"+100*l[s[1]]+"%,"+100*l[s[2]]+"%)"}}function u(){switch(y){case 0:var e=2;break;case 1:e=1}var o=Math.round((1-b.hsv[e])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(b.pickerFace+b.pickerInset+o-Math.floor(jscolor.images.arrow[1]/2))+"px"}function p(){return jscolor.picker&&jscolor.picker.owner===b}function m(e){var e=jscolor.getMousePos(e),o=e[0]-f[0],t=e[1]-f[1];switch(y){case 0:b.fromHSV(o*(6/(jscolor.images.pad[0]-1)),1-t/(jscolor.images.pad[1]-1),null,l);break;case 1:b.fromHSV(o*(6/(jscolor.images.pad[0]-1)),null,1-t/(jscolor.images.pad[1]-1),l)}}function g(e){var o=jscolor.getMousePos(e)[1]-f[1];switch(y){case 0:b.fromHSV(null,null,1-o/(jscolor.images.sld[1]-1),c);break;case 1:b.fromHSV(null,1-o/(jscolor.images.sld[1]-1),null,c)}}this.hidePicker=function(){p()&&(delete jscolor.picker.owner,document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB))},this.showPicker=function(){if(!p()){var e,o,t,r=jscolor.getElementPos(a),s=jscolor.getElementSize(a),i=jscolor.getViewPos(),c=jscolor.getViewSize(),l=[2*this.pickerBorder+4*this.pickerInset+2*this.pickerFace+jscolor.images.pad[0]+2*jscolor.images.arrow[0]+jscolor.images.sld[0],2*this.pickerBorder+2*this.pickerInset+2*this.pickerFace+jscolor.images.pad[1]];switch(this.pickerPosition.toLowerCase()){case"left":o=0,t=-(e=1);break;case"right":o=0,t=e=1;break;case"top":e=0,t=-(o=1);break;default:e=0,t=o=1}var n=(s[o]+l[o])/2,n=[-i[e]+r[e]+l[e]>c[e]&&-i[e]+r[e]+s[e]/2>c[e]/2&&0<=r[e]+s[e]-l[e]?r[e]+s[e]-l[e]:r[e],-i[o]+r[o]+s[o]+l[o]-n+n*t>c[o]?-i[o]+r[o]+s[o]/2>c[o]/2&&0<=r[o]+s[o]-n-n*t?r[o]+s[o]-n-n*t:r[o]+s[o]-n+n*t:0<=r[o]+s[o]-n+n*t?r[o]+s[o]-n+n*t:r[o]+s[o]-n-n*t];!function(e,o){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div")};for(var t=0;t<jscolor.images.sld[1];t+=4){var r=document.createElement("div");r.style.height="4px",r.style.fontSize="1px",r.style.lineHeight="0",jscolor.picker.sld.appendChild(r)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var s=jscolor.picker;f=[e+b.pickerBorder+b.pickerFace+b.pickerInset,o+b.pickerBorder+b.pickerFace+b.pickerInset],b.pickerBorder,b.pickerFace,b.pickerInset,s.box.onmouseup=s.box.onmouseout=function(){a.focus()},s.box.onmousedown=function(){k=!0},s.box.onmousemove=function(e){v&&m(e),w&&g(e)},s.padM.onmouseup=s.padM.onmouseout=function(){v&&(v=!1,jscolor.fireEvent(j,"change"))},s.padM.onmousedown=function(e){v=!0,m(e)},s.sldM.onmouseup=s.sldM.onmouseout=function(){w&&(w=!1,jscolor.fireEvent(j,"change"))},s.sldM.onmousedown=function(e){w=!0,g(e)},s.box.style.width=4*b.pickerInset+2*b.pickerFace+jscolor.images.pad[0]+2*jscolor.images.arrow[0]+jscolor.images.sld[0]+"px",s.box.style.height=2*b.pickerInset+2*b.pickerFace+jscolor.images.pad[1]+"px",s.boxB.style.position="absolute",s.boxB.style.clear="both",s.boxB.style.left=e+"px",s.boxB.style.top=o+"px",s.boxB.style.zIndex=b.pickerZIndex,s.boxB.style.border=b.pickerBorder+"px solid",s.boxB.style.borderColor=b.pickerBorderColor,s.boxB.style.background=b.pickerFaceColor,s.pad.style.width=jscolor.images.pad[0]+"px",s.pad.style.height=jscolor.images.pad[1]+"px",s.padB.style.position="absolute",s.padB.style.left=b.pickerFace+"px",s.padB.style.top=b.pickerFace+"px",s.padB.style.border=b.pickerInset+"px solid",s.padB.style.borderColor=b.pickerInsetColor,s.padM.style.position="absolute",s.padM.style.left="0",s.padM.style.top="0",s.padM.style.width=b.pickerFace+2*b.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",s.padM.style.height=s.box.style.height,s.padM.style.cursor="crosshair",s.sld.style.overflow="hidden",s.sld.style.width=jscolor.images.sld[0]+"px",s.sld.style.height=jscolor.images.sld[1]+"px",s.sldB.style.position="absolute",s.sldB.style.right=b.pickerFace+"px",s.sldB.style.top=b.pickerFace+"px",s.sldB.style.border=b.pickerInset+"px solid",s.sldB.style.borderColor=b.pickerInsetColor,s.sldM.style.position="absolute",s.sldM.style.right="0",s.sldM.style.top="0",s.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+b.pickerFace+2*b.pickerInset+"px",s.sldM.style.height=s.box.style.height;try{s.sldM.style.cursor="pointer"}catch(e){s.sldM.style.cursor="hand"}switch(y){case 0:var i="hs.png";break;case 1:i="hv.png"}s.padM.style.background="url('"+jscolor.getDir()+"cross.gif') no-repeat",s.sldM.style.background="url('"+jscolor.getDir()+"arrow.gif') no-repeat",s.pad.style.background="url('"+jscolor.getDir()+i+"') 0 0 no-repeat",d(),u(),jscolor.picker.owner=b,document.getElementsByTagName("body")[0].appendChild(s.boxB)}(n[e],n[o])}},this.importColor=function(){j?this.adjust?!this.required&&/^\s*$/.test(j.value)?(j.value="",r.style.backgroundColor=r.jscStyle.backgroundColor,r.style.color=r.jscStyle.color,this.exportColor(s|i)):this.fromString(j.value)||this.exportColor():this.fromString(j.value,s)||(r.style.backgroundColor=r.jscStyle.backgroundColor,r.style.color=r.jscStyle.color,this.exportColor(s|i)):this.exportColor()},this.exportColor=function(e){var o;e&s||!j||(o=this.toString(),this.caps&&(o=o.toUpperCase()),this.hash&&(o="#"+o),j.value=o),e&i||!r||(r.style.backgroundColor="#"+this.toString(),r.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),e&c||!p()||d(),e&l||!p()||u()},this.fromHSV=function(e,o,t,r){e<0&&(e=0)||6<e&&(e=6),o<0&&(o=0)||1<o&&(o=1),t<0&&(t=0)||1<t&&(t=1),this.rgb=h(null===e?this.hsv[0]:this.hsv[0]=e,null===o?this.hsv[1]:this.hsv[1]=o,null===t?this.hsv[2]:this.hsv[2]=t),this.exportColor(r)},this.fromRGB=function(e,o,t,r){e<0&&(e=0)||1<e&&(e=1),o<0&&(o=0)||1<o&&(o=1),t<0&&(t=0)||1<t&&(t=1);t=function(e,o,t){var r=Math.min(Math.min(e,o),t),s=Math.max(Math.max(e,o),t),i=s-r;if(0==i)return[null,0,s];e=e===r?3+(t-o)/i:o===r?5+(e-t)/i:1+(o-e)/i;return[6==e?0:e,i/s,s]}(null===e?this.rgb[0]:this.rgb[0]=e,null===o?this.rgb[1]:this.rgb[1]=o,null===t?this.rgb[2]:this.rgb[2]=t);null!==t[0]&&(this.hsv[0]=t[0]),0!==t[2]&&(this.hsv[1]=t[1]),this.hsv[2]=t[2],this.exportColor(r)},this.fromString=function(e,o){e=e.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return!!e&&(6===e[1].length?this.fromRGB(parseInt(e[1].substr(0,2),16)/255,parseInt(e[1].substr(2,2),16)/255,parseInt(e[1].substr(4,2),16)/255,o):this.fromRGB(parseInt(e[1].charAt(0)+e[1].charAt(0),16)/255,parseInt(e[1].charAt(1)+e[1].charAt(1),16)/255,parseInt(e[1].charAt(2)+e[1].charAt(2),16)/255,o),!0)},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var f,t,b=this,y="hvs"===this.pickerMode.toLowerCase()?1:0,k=!1,j=jscolor.fetchElement(this.valueElement),r=jscolor.fetchElement(this.styleElement),v=!1,w=!1,s=1,i=2,c=4,l=8;switch(jscolor.addEvent(a,"focus",function(){b.pickerOnfocus&&b.showPicker()}),jscolor.addEvent(a,"blur",function(){k?k=!1:window.setTimeout(function(){k||(j===a&&b.importColor(),b.pickerOnfocus&&b.hidePicker()),k=!1},0)}),j&&(t=function(){b.fromString(j.value,s)},jscolor.addEvent(j,"keyup",t),jscolor.addEvent(j,"input",t),jscolor.addEvent(j,"blur",function(){j!==a&&b.importColor()}),j.setAttribute("autocomplete","off")),r&&(r.jscStyle={backgroundColor:r.style.backgroundColor,color:r.style.color}),y){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif"),jscolor.requireImage("arrow.gif"),this.importColor()}};jscolor.install();